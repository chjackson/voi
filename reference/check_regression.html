<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Check the fit of a regression model used to estimate EVPPI or EVSI — check_regression • voi</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Check the fit of a regression model used to estimate EVPPI or EVSI — check_regression"><meta property="og:description" content="Produces diagnostic plots and summaries of regression models used to estimate EVPPI or EVSI,
mainly in order to check that the residuals have mean zero."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">voi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/voi.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Check the fit of a regression model used to estimate EVPPI or EVSI</h1>
    
    <div class="hidden name"><code>check_regression.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Produces diagnostic plots and summaries of regression models used to estimate EVPPI or EVSI,
mainly in order to check that the residuals have mean zero.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_regression</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  pars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  comparison <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"costs"</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>Output from <code><a href="evppi.html">evppi</a></code> or <code><a href="evsi.html">evsi</a></code>. The argument <code>check=TRUE</code>
must have been used when calling <code>evppi</code> or <code>evsi</code>, to allow the regression model
objects from <code>gam</code> or <code>earth</code> to be preserved.  (This is not done by
default, since these objects can be large.).   <code>attr(x, "models")</code> cont</p></dd>


<dt>pars</dt>
<dd><p>Parameter (or parameter group) whose EVPPI calculation is to be checked.
This should be in the <code>pars</code> component of the object returned by <code><a href="evppi.html">evppi</a></code>.
Only relevant if <code>x</code> is the result of an <code><a href="evppi.html">evppi</a></code> calculation.</p></dd>


<dt>n</dt>
<dd><p>Sample size whose EVSI calculation is to be checked.
This should be in the <code>n</code> component of the object returned by <code><a href="evsi.html">evsi</a></code>.
Only relevant if <code>x</code> is the result of an <code><a href="evsi.html">evsi</a></code> calculation.</p></dd>


<dt>comparison</dt>
<dd><p>Only relevant if there are more than two treatments in the decision model.
Different regression models are then used for the comparisons of different treatments
with the baseline treatment.
<code>comparison</code> is an integer identifying which of these models is checked.</p></dd>


<dt>outcome</dt>
<dd><p><code>"costs"</code> or <code>"effects"</code>.  Only relevant if <code>outputs</code> was
in cost-effectiveness format when
calling <code>evppi</code> or <code>evsi</code>, hence different regressions are used for costs and
effects.  By default, <code>outcome="costs"</code> is used, so that the regression
for costs is checked.</p></dd>


<dt>plot</dt>
<dd><p>If <code>FALSE</code>, only numerical statistics are returned, and a plot is not made.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Where possible, an appropriate statistic is returned that allows the regression
model to be compared with other regression models implemented using the same <code>method</code></p>


<p>but with different assumptions.   For <code>method=="gam"</code>,
this is Akaike's information criterion (AIC).
For <code>method=="earth"</code>, this is the generalised cross-validation statistic
<code>gcv</code>.    Currently not implemented for other methods.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For VoI estimation, the key thing we are looking for is that the residuals
have mean zero, hence that the mean of the model output is represented well by the
regression function of the model input parameters.  It should not matter if the
variance of the residuals is non-constant, or non-normally distributed.</p>
<p>Models produced with <code>method="gam"</code> are checked using <code>gam.check</code></p>
<p>Models produced <code>method="earth"</code> are checked using <code>plot.earth</code></p>
<p>Models produced with <code>method="gp"</code> or <code>method="inla"</code> are checked using a histogram
of the residuals, and plots of the residuals and response against the fitted values.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># TODO and refer in vignette</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Christopher Jackson, Anna Heath, Kofi Placid Adragni, Andrew Raim.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

