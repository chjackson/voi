<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate the expected value of sample information for an estimation problem — evsivar • voi</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate the expected value of sample information for an estimation problem — evsivar"><meta name="description" content="Calculate the expected value of sample information for an estimation problem.  This computes the expected reduction in variance in some quantity of interest from a study of a certain design that informs the parameters of interest."><meta property="og:description" content="Calculate the expected value of sample information for an estimation problem.  This computes the expected reduction in variance in some quantity of interest from a study of a certain design that informs the parameters of interest."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">voi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/voi.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/book.html">Value of Information for Health Economic Evaluations: book code resources</a></li>
    <li><a class="dropdown-item" href="../articles/plots.html">Plots of Value of Information measures</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/chjackson/voi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate the expected value of sample information for an estimation problem</h1>
      <small class="dont-index">Source: <a href="https://github.com/chjackson/voi/blob/master/R/evsivar.R" class="external-link"><code>R/evsivar.R</code></a></small>
      <div class="d-none name"><code>evsivar.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate the expected value of sample information for an estimation problem.  This computes the expected reduction in variance in some quantity of interest from a study of a certain design that informs the parameters of interest.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">evsivar</span><span class="op">(</span></span>
<span>  <span class="va">outputs</span>,</span>
<span>  <span class="va">inputs</span>,</span>
<span>  study <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  datagen_fn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  aux_pars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nsim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-outputs">outputs<a class="anchor" aria-label="anchor" href="#arg-outputs"></a></dt>
<dd><p>a vector of values for the quantity of interest, sampled from the uncertainty distribution of this quantity that is induced by the uncertainty about the parameters.</p></dd>


<dt id="arg-inputs">inputs<a class="anchor" aria-label="anchor" href="#arg-inputs"></a></dt>
<dd><p>Matrix or data frame of samples from the uncertainty
distribution of the input parameters of the decision model.   The number
of columns should equal the number of parameters, and the columns should
be named.    This should have the same number of rows as there are samples
in <code>outputs</code>, and each row of the samples in <code>outputs</code> should
give the model output evaluated at the corresponding parameters.</p>
<p>Users of <span class="pkg">heemod</span> can create an object of this form, given an object
produced by <code>run_psa</code> (<code>obj</code>, say), with <code><a href="import_heemod.html">import_heemod_inputs</a></code>.</p></dd>


<dt id="arg-study">study<a class="anchor" aria-label="anchor" href="#arg-study"></a></dt>
<dd><p>Name of one of the built-in study types supported by this
package for EVSI calculation.  If this is supplied, then the columns of
<code>inputs</code> that correspond to the parameters governing the study data
should be identified in <code>pars</code>.</p>
<p>Current built-in studies are</p>
<p><code>"binary"</code> A study with a binary outcome observed on one sample of
individuals.   Requires one parameter: the probability of the outcome. The
sample size is specifed in the <code>n</code> argument to <code><a href="evsi.html">evsi()</a></code>, and the
binomially-distributed outcome is named <code>X1</code>.</p>
<p><code>"trial_binary"</code> Two-arm trial with a binary outcome.   Requires two
parameters: the probability of the outcome in arm 1 and 2 respectively.
The sample size is the same in each arm, specifed in the <code>n</code> argument
to <code><a href="evsi.html">evsi()</a></code>, and the binomial outcomes are named <code>X1</code> and
<code>X2</code> respectively.</p>
<p><code>"normal_known"</code> A study of a normally-distributed outcome, with a
known standard deviation, on one sample of individuals.  Likewise the
sample size is specified in the <code>n</code> argument to <code><a href="evsi.html">evsi()</a></code>.  The
standard deviation defaults to 1, and can be changed by specifying
<code>sd</code> as a component of the <code>aux_pars</code> argument, e.g.
<code>evsi(..., aux_pars=list(sd=2))</code>.</p>
<p>Either <code>study</code> or <code>datagen_fn</code> should be supplied to
<code><a href="evsi.html">evsi()</a></code>.</p>
<p>For the EVSI calculation methods where explicit Bayesian analyses of the
simulated data are performed, the prior parameters for these built-in studies
are supplied in the <code>analysis_args</code> argument to <code><a href="evsi.html">evsi()</a></code>.  These
assume Beta priors for probabilities, and Normal priors for the mean of a
normal outcome.</p></dd>


<dt id="arg-datagen-fn">datagen_fn<a class="anchor" aria-label="anchor" href="#arg-datagen-fn"></a></dt>
<dd><p>If the proposed study is not one of the built-in types
supported, it can be specified in this argument as an R function to sample
predicted data from the study.  This function should have the following
specification:</p><ol><li><p>the function's first argument should be a data frame of parameter
simulations, with one row per simulation and one column per parameter.
The parameters in this data frame must all be found in <code>inputs</code>,
but need not necessarily be in the same order or include all of them.</p></li>
<li><p>the function should return a data frame.</p></li>
<li><p>the returned data frame should have number of rows equal to the number
of parameter simulations in <code>inputs</code>.</p></li>
<li><p>if <code>inputs</code> is considered as a sample from the posterior, then
<code>datagen_fn(inputs)</code> returns a corresponding sample from the
posterior predictive distribution, which includes two sources of
uncertainty: (a) uncertainty about the parameters and (b) sampling
variation in observed data given fixed parameter values.</p></li>
<li><p>the function can optionally have more than one argument. If so, these
additional arguments should be given default values in the definition of
<code>datagen_fn</code>.  If there is an argument called <code>n</code>, then it is
interpreted as the sample size for the proposed study.</p></li>
</ol></dd>


<dt id="arg-pars">pars<a class="anchor" aria-label="anchor" href="#arg-pars"></a></dt>
<dd><p>Character vector identifying which parameters are learned from the proposed study.
This is required for the moment matching and importance sampling methods,
and these should be columns of <code>inputs</code>.   This is not required for the nonparametric
regression methods.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Sample size of future study, or vector of alternative sample sizes.
This is understood by the built-in study designs.  For studies specified
by the user with <code>datagen_fn</code>, if <code>datagen_fn</code> has an argument
<code>n</code>, then this is interpreted as the sample size.  However if
calling <code>evsi</code> for a user-specified design where
<code>datagen_fn</code> does not have an <code>n</code> argument, then any <code>n</code>
argument supplied to <code>evsi</code> will be ignored.</p>
<p>Currently this
shortcut is not supported if more than one quantity is required to
describe the sample size, for example, trials with unbalanced arms.  In
that case, you will have to hard-code the required sample sizes into
<code>datagen_fn</code>.</p>
<p>For the nonparametric regression and importance sampling methods, the
computation is simply repeated for each sample size supplied here.</p>
<p>The moment matching method uses a regression model to estimate the
dependency of the EVSI on the sample size, hence to enable EVSI to be
calculated efficiently for any number of sample sizes (Heath et al. 2019).</p></dd>


<dt id="arg-aux-pars">aux_pars<a class="anchor" aria-label="anchor" href="#arg-aux-pars"></a></dt>
<dd><p>A list of additional fixed arguments to supply to the
function to generate the data, whether that is a built-in study design or user-defined
function supplied in <code>datagen_fn</code>.  For example, <code>evsi(..., aux_pars = list(sd=2))</code> defines the fixed
standard deviation in the <code>"normal_known"</code> model.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>See <code><a href="evsi.html">evsi</a></code>, only nonparametric regression methods are
currently supported in <code>evsivar</code>.</p></dd>


<dt id="arg-nsim">nsim<a class="anchor" aria-label="anchor" href="#arg-nsim"></a></dt>
<dd><p>Number of simulations from the model to use for calculating
EVPPI.  The first <code>nsim</code> rows of the objects in <code>inputs</code> and
<code>outputs</code> are used.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>If <code>TRUE</code>, then messages are printed
describing each step of the calculation, if the method supplies
these.  Can be useful to see the progress of slow calculations.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments understood by specific methods, e.g. <code>gam_formula</code>
and other controlling options (see <code><a href="evppi.html">evppi</a></code>) can be passed to the
nonparametric regression used inside the moment matching method.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with a column <code>pars</code>, indicating the parameter(s), and a column <code>evsi</code>, giving the corresponding EVSI.  If there are EVSI estimates for multiple sample sizes, the sample size is returned in the column <code>n</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Jackson, C., Presanis, A., Conti, S., &amp; De Angelis, D. (2019). Value of information:
Sensitivity analysis and research design in Bayesian evidence synthesis.
Journal of the American Statistical Association, 114(528), 1436-1449.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">

</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

