<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Expected net benefit of sampling — enbs • voi</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Expected net benefit of sampling — enbs"><meta name="description" content="Calculates the expected net benefit of sampling for a typical study to inform
a health economic evaluation, given estimates of the per-person expected
value of sample information, decision population size and study setup and
per-participant costs.   The optimal sample size for each willingness-to-pay,
population size and time horizon is also determined."><meta property="og:description" content="Calculates the expected net benefit of sampling for a typical study to inform
a health economic evaluation, given estimates of the per-person expected
value of sample information, decision population size and study setup and
per-participant costs.   The optimal sample size for each willingness-to-pay,
population size and time horizon is also determined."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">voi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/voi.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/book.html">Value of Information for Health Economic Evaluations: book code resources</a></li>
    <li><a class="dropdown-item" href="../articles/plots.html">Plots of Value of Information measures</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/chjackson/voi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Expected net benefit of sampling</h1>
      <small class="dont-index">Source: <a href="https://github.com/chjackson/voi/blob/v1.0.2/R/enbs.R" class="external-link"><code>R/enbs.R</code></a></small>
      <div class="d-none name"><code>enbs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates the expected net benefit of sampling for a typical study to inform
a health economic evaluation, given estimates of the per-person expected
value of sample information, decision population size and study setup and
per-participant costs.   The optimal sample size for each willingness-to-pay,
population size and time horizon is also determined.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enbs</span><span class="op">(</span></span>
<span>  <span class="va">evsi</span>,</span>
<span>  <span class="va">costs_setup</span>,</span>
<span>  <span class="va">costs_pp</span>,</span>
<span>  <span class="va">pop</span>,</span>
<span>  <span class="va">time</span>,</span>
<span>  dis <span class="op">=</span> <span class="fl">0.035</span>,</span>
<span>  smooth <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  smooth_df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pcut <span class="op">=</span> <span class="fl">0.05</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-evsi">evsi<a class="anchor" aria-label="anchor" href="#arg-evsi"></a></dt>
<dd><p>Data frame giving estimates of the expected value of sample
information, as returned by <code><a href="evsi.html">evsi</a></code>.  This may contain
multiple estimates, one for each sample size and willingness to pay.</p></dd>


<dt id="arg-costs-setup">costs_setup<a class="anchor" aria-label="anchor" href="#arg-costs-setup"></a></dt>
<dd><p>Setup costs of the study.  This can either be a constant,
or a vector of two elements giving a 95% credible interval (with mean
defined by the midpoint), or a vector of three elements assumed to define
the mean and 95% credible interval.</p></dd>


<dt id="arg-costs-pp">costs_pp<a class="anchor" aria-label="anchor" href="#arg-costs-pp"></a></dt>
<dd><p>Per-participant costs of the study, supplied in the same
format as <code>cost_setup</code>.</p></dd>


<dt id="arg-pop">pop<a class="anchor" aria-label="anchor" href="#arg-pop"></a></dt>
<dd><p>Size of the population who would be affected by the decision.</p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>Time horizon over which discounting will be applied.</p></dd>


<dt id="arg-dis">dis<a class="anchor" aria-label="anchor" href="#arg-dis"></a></dt>
<dd><p>Discount rate used when converting per-person to population EVSI.</p></dd>


<dt id="arg-smooth">smooth<a class="anchor" aria-label="anchor" href="#arg-smooth"></a></dt>
<dd><p>If <code>TRUE</code>, then the maximum ENBS is determined after
fitting a nonparametric regression to the data frame <code>x</code>, which
estimates and smooths the ENBS for every integer sample size in the range
of <code>x$n</code>.  The regression is done using the default settings of
<code><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">gam</a></code> from the <span class="pkg">mgcv</span> package.</p>
<p>If this is <code>FALSE</code>, then no smoothing or interpolation is done, and
the maximum is determined by searching over the values supplied in
<code>x</code>.</p></dd>


<dt id="arg-smooth-df">smooth_df<a class="anchor" aria-label="anchor" href="#arg-smooth-df"></a></dt>
<dd><p>Basis dimension for the smooth regression. Passed as the
<code>k</code> argument to the <code>s()</code> term in <code><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">gam</a></code>.   Defaults to
6, or the number of unique sample sizes minus 1 if this is lower.  Set
to a higher number if you think the smoother does not capture the
relation of ENBS to sample size accurately enough.</p></dd>


<dt id="arg-pcut">pcut<a class="anchor" aria-label="anchor" href="#arg-pcut"></a></dt>
<dd><p>Cut-off probability which defines a "near-optimal" sample size.
The minimum and maximum sample size for which the ENBS is within
<code>pcut</code> (by default 5%) of its maximum value will be determined.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Data frame with components <code>enbs</code> giving the ENBS, and
<code>sd</code> giving the corresponding standard deviation.  The rows of the
data frame correspond to the rows of <code>evsi</code>, and any <code>n</code> and
<code>k</code> are inherited from <code>evsi</code>.  Additional columns include:</p>
<p><code>pce</code>: the probability that the study is cost-effective, i.e. that
the ENBS is positive, obtained from a normal distribution defined by the
estimate and standard deviation.</p>
<p><code>enbsmax</code>: The maximum ENBS for each willingness-to-pay <code>k</code>.</p>
<p><code>nmax</code>: The sample size <code>n</code> at which this maximum is achieved.</p>
<p>A second data frame is returned as the <code>"enbsmax"</code> attribute.
This has one row per willingness-to-pay (<code>k</code>), giving the optimal
ENBS (<code>enbsmax</code>) the optimal sample size (<code>nmax</code>) and an interval
estimate for the optimal sample size (<code>nlower</code> to <code>nupper</code>).</p>
<p>If <code>pop</code>, <code>time</code> or <code>dis</code> were supplied as vectors
of more than one element, then additional columns will be returned
in these data frames to identify the population, time or discount
rate for each ENBS calculation.  An index <code>ind</code> is also returned
to identify the unique combination that each row refers to.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>pop</code>,<code>time</code> and <code>dis</code> may be supplied as vectors
of different lengths.  In that case, the ENBS is calculated for all
possible combinations of the values in these vectors.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Value of Information for Healthcare Decision Making
(CRC Press, eds. Heath, Kunst and Jackson: forthcoming)</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">

</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

